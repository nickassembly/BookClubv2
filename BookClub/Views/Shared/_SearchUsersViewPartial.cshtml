@using BookClub.Data.Entities.User
@model List<LoginUserFriendship>

<div class="">
    <ul id="userList" class="list-group">
        @foreach (var user in Model)
        {
            <li id="user" class="list-group-item">
                @user.UserFriend.UserName
                <a class="btn-primary btn-sm" asp-area="" asp-route-userId="@user.UserId" asp-controller="Account" asp-action="AddFriend">Add Friend</a>
            </li>
        }
    </ul>
</div>

<div class="form-inline" id="searchUsersInput">
    <input class="form-control mr-sm-2" type="text" name="searchInput" id="searchUsersParam" placeholder="Search Users" aria-label="Search">
    <button class="btn btn-outline-success my-2 my-sm-0" onclick="searchUsers($('#searchUsersParam').val())" id="searchUsers" type="button">Search Users</button>
</div>

<div  class="bs-example">
    <!-- Modal HTML -->
    <form asp-controller="Account" asp-action="SearchUsers" method="get">
        <div id="userModal" class="modal fade" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">
                            Users
                        </h5>
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                    <div class="modal-body">
                       <ul class="list-group">
                          
                        </ul>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                        @Html.AntiForgeryToken()
                        <button type="button" id="saveNote" class="btn btn-primary">Save</button>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>


<script src="~/lib/jquery/dist/jquery.min.js"></script>
<link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />

<script type="text/javascript">

    var users = [];

   function searchUsers(searchParam){
        console.log(searchParam);

        $.ajax({
        type: 'GET',
        url: '@Url.Action("SearchUsers")',
        //data:{"EmpId":EmpId},
        data:{"searchParam": searchParam },
        dataType: 'json',
        success: function (data) {
            console.log(data);
            //$('#id').text(emp.employee.Id);
            //$('#firstName').text(emp.employee.FirstName);
            //$('#lastName').text(emp.employee.LastName);
        },
        error: function (emp) {
            alert('error');
        }
    });

        $('#userModal').modal('show');
   }

</script>

